<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Project 2</title>
    <link rel="stylesheet" href="project2.css">
</head>
<body>
    <div class="topnav">
        <a href="../Documentation.html">Documentation</a>
        <a href="../index.html">Graphs</a>
    </div>

    <svg id="map-target"></svg>
</body>
</html>

<script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
<script src="https://d3js.org/d3-queue.v1.min.js"></script>
<script src="https://d3js.org/topojson.v2.min.js"></script>
<script type="text/javascript">

    function drawFirstMap() {
        var width = 720,
            height = 500;

        var projection = d3.geoAlbers()
            .scale(1000)
            .translate([width / 2, height / 2]);

        var path = d3.geoPath()
            .projection(projection);

        var svg = d3.select("#map-target")
            .attr("width", width)
            .attr("height", height);

        var path = d3.geoPath();
        d3.json("https://d3js.org/us-10m.v1.json", function (error, us) {
            if (error) throw error;


            var color = d3.scaleThreshold()
                .domain([true, false])
                .range(["#f2f0f7", "#54278f"]);
            d3.tsv("us-state-names.tsv", function (tsv) {
                // extract just the names and Ids
                var names = {};
                tsv.forEach(function (d, i) {
                    names[d.id] = d.name;
                });

                svg.append("g")
                    .attr("class", "states")
                    .selectAll("path")
                    .data(topojson.feature(us, us.objects.states).features)
                    .enter().append("path")
                    .attr("d", path)
                    .style("fill", function (d) {
                        var x = color(names[parseInt(d.id)] === "Alaska");
                        return x;
                    });

            });

        });
    }
    drawFirstMap();
	let emp_data = [];
	d3.csv("Project 2 Employment Data.csv", function(data) {
				for (let counter = 0; counter < data.length; counter++) {
				
					let state = data[counter].State;
					let costIndex = data[counter].costIndex;
					let costRank = data[counter].costRank;
					let costIndexPercentile = data[counter].costIndexPercentile;
					let laborForceSept19 = data[counter].Labor_Force_Sept_2019;
					
					
					emp_data.push ({
						state: state,
						costIndex: costIndex,
						costRank: costRank,
						costIndexPercentile: costIndexPercentile,
						laborForceSept19: laborForceSept19
					});
				};
			console.log(emp_data.laborForceSept19);
	});
</script>